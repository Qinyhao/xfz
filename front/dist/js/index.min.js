function Banner(){this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.listenBannerHover(),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pagecontrol=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn")}Banner.prototype.initBanner=function(){var n=this,t=n.liList.eq(0).clone(),e=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(t),n.bannerUl.prepend(e),n.bannerUl.css({width:(n.bannerCount+2)*n.bannerWidth,left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,t=0;t<n.bannerCount;t++){var e=$("<li></li>");n.pagecontrol.append(e),0===t&&e.addClass("active")}n.pagecontrol.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.toggleArrow=function(n){var t=this;n?(t.leftArrow.show(),t.rightArrow.show()):(t.leftArrow.hide(),t.rightArrow.hide())},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.animate=function(){var n=this;n.bannerUl.stop().animate({left:-798*n.index},500);var t=n.index;t=0===t?n.bannerCount-1:t===n.bannerCount+1?0:n.index-1,n.pagecontrol.children("li").eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index+=1,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerWidth*n.bannerCount}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenPageControl=function(){var e=this;e.pagecontrol.children("li").each(function(n,t){$(t).click(function(){e.index=n,e.animate()})})},Banner.prototype.run=function(){this.initBanner(),this.loop(),this.listenArrowClick(),this.initPageControl(),this.listenPageControl()},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategoryEvent()},Index.prototype.listenLoadMoreEvent=function(){var i=this;i.loadBtn.click(function(){xfzajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news-item",{newses:t});$(".list-inner-group").append(e),i.page+=1}else i.loadBtn.hide()}}})})},Index.prototype.listenCategoryEvent=function(){var o=this;$(".list-tab").children().click(function(){var r=$(this),a=r.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:a,p:1},success:function(n){if(200===n.code){var t=n.data,e=template("news-item",{newses:t}),i=$(".list-inner-group");i.empty(),i.append(e),o.page=2,o.category_id=a,r.addClass("active").siblings().removeClass("active"),o.loadBtn.show()}}})})},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImxpc3RlbkJhbm5lckhvdmVyIiwiaW5kZXgiLCJsZWZ0QXJyb3ciLCJyaWdodEFycm93IiwiYmFubmVyVWwiLCJsaUxpc3QiLCJjaGlsZHJlbiIsImJhbm5lckNvdW50IiwibGVuZ3RoIiwicGFnZWNvbnRyb2wiLCJJbmRleCIsInNlbGYiLCJwYWdlIiwiY2F0ZWdvcnlfaWQiLCJsb2FkQnRuIiwicHJvdG90eXBlIiwiaW5pdEJhbm5lciIsImZpcnN0QmFubmVyIiwiZXEiLCJjbG9uZSIsImxhc3RCYW5uZXIiLCJhcHBlbmQiLCJwcmVwZW5kIiwiY3NzIiwid2lkdGgiLCJsZWZ0IiwiaW5pdFBhZ2VDb250cm9sIiwiaSIsImNpcmNsZSIsImFkZENsYXNzIiwidG9nZ2xlQXJyb3ciLCJpc1Nob3ciLCJzaG93IiwiaGlkZSIsImhvdmVyIiwiY2xlYXJJbnRlcnZhbCIsInRpbWVyIiwibG9vcCIsImFuaW1hdGUiLCJzdG9wIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsInNldEludGVydmFsIiwibGlzdGVuQXJyb3dDbGljayIsImNsaWNrIiwibGlzdGVuUGFnZUNvbnRyb2wiLCJlYWNoIiwib2JqIiwicnVuIiwibGlzdGVuTG9hZE1vcmVFdmVudCIsImxpc3RlbkNhdGVnb3J5RXZlbnQiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInAiLCJzdWNjZXNzIiwicmVzdWx0IiwibmV3c2VzIiwidHBsIiwidGVtcGxhdGUiLCJsaSIsImF0dHIiLCJuZXdzTGlzdEdyb3VwIiwiZW1wdHkiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFNBQ0xDLEtBQUtDLFlBQWMsSUFDbkJELEtBQUtFLFlBQWNDLEVBQUUsaUJBQ3JCSCxLQUFLSSxvQkFDTEosS0FBS0ssTUFBUSxFQUNiTCxLQUFLTSxVQUFZSCxFQUFFLGVBQ25CSCxLQUFLTyxXQUFh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R0FBc0IsTUFBbkJBLEVBQWEsS0FBVSxDQUN0QixJQUFJQyxFQUFTRCxFQUFhLEtBQ3RCRSxFQUFNQyxTQUFTLFlBQVksQ0FBQ0YsT0FBU0EsSUFFckNLLEVBQWdCaEUsRUFBRSxxQkFDdEJnRSxFQUFjQyxRQUNkRCxFQUFjMUMsT0FBT3NDLEdBQ3JCaEQsRUFBS0MsS0FBTyxFQUNaRCxFQUFLRSxZQUFjQSxFQUNuQmdELEVBQUdoQyxTQUFTLFVBQVVXLFdBQVdDLFlBQVksVUFDN0M5QixFQUFLRyxRQUFRa0IsY0FTakNqQyxFQUFFLFlBQ2UsSUFBSUosUUFDVnFELE9BQ0ksSUFBSXRDLE9BQ1RzQyIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBCYW5uZXIoKSB7XHJcbiAgICB0aGlzLmJhbm5lcldpZHRoID0gNzk4O1xyXG4gICAgdGhpcy5iYW5uZXJHcm91cCA9ICQoXCIjYmFubmVyLWdyb3VwXCIpO1xyXG4gICAgdGhpcy5saXN0ZW5CYW5uZXJIb3ZlcigpO1xyXG4gICAgdGhpcy5pbmRleCA9IDE7XHJcbiAgICB0aGlzLmxlZnRBcnJvdyA9ICQoXCIubGVmdC1hcnJvd1wiKTtcclxuICAgIHRoaXMucmlnaHRBcnJvdyA9ICQoXCIucmlnaHQtYXJyb3dcIik7XHJcbiAgICB0aGlzLmJhbm5lclVsID0gJChcIiNiYW5uZXItdWxcIik7XHJcbiAgICB0aGlzLmxpTGlzdD0gdGhpcy5iYW5uZXJVbC5jaGlsZHJlbihcImxpXCIpO1xyXG4gICAgdGhpcy5iYW5uZXJDb3VudCA9IHRoaXMubGlMaXN0Lmxlbmd0aDtcclxuICAgIHRoaXMucGFnZWNvbnRyb2wgPSAkKCcucGFnZS1jb250cm9sJyk7XHJcbn1cclxuXHJcbkJhbm5lci5wcm90b3R5cGUuaW5pdEJhbm5lciA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgZmlyc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcSgwKS5jbG9uZSgpXHJcbiAgICB2YXIgbGFzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKHNlbGYuYmFubmVyQ291bnQtMSkuY2xvbmUoKVxyXG4gICAgc2VsZi5iYW5uZXJVbC5hcHBlbmQoZmlyc3RCYW5uZXIpO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5wcmVwZW5kKGxhc3RCYW5uZXIpO1xyXG5cclxuICAgIHNlbGYuYmFubmVyVWwuY3NzKHsnd2lkdGgnOihzZWxmLmJhbm5lckNvdW50KzIpKnNlbGYuYmFubmVyV2lkdGgsJ2xlZnQnOi1zZWxmLmJhbm5lcldpZHRofSlcclxuXHJcbn1cclxuXHJcbkJhbm5lci5wcm90b3R5cGUuaW5pdFBhZ2VDb250cm9sID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIGZvcih2YXIgaT0wO2k8c2VsZi5iYW5uZXJDb3VudDtpKyspe1xyXG4gICAgICAgIHZhciBjaXJjbGUgPSAkKFwiPGxpPjwvbGk+XCIpO1xyXG4gICAgICAgIHNlbGYucGFnZWNvbnRyb2wuYXBwZW5kKGNpcmNsZSk7XHJcbiAgICAgICAgaWYgKGk9PT0wKXtcclxuICAgICAgICAgICAgY2lyY2xlLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZWxmLnBhZ2Vjb250cm9sLmNzcyh7J3dpZHRoJzpzZWxmLmJhbm5lckNvdW50KjEyKzgqMisxNiooc2VsZi5iYW5uZXJDb3VudC0xKX0pXHJcblxyXG59XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnRvZ2dsZUFycm93ID0gZnVuY3Rpb24oaXNTaG93KXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIGlmKGlzU2hvdyl7XHJcbiAgICAgICAgc2VsZi5sZWZ0QXJyb3cuc2hvdygpXHJcbiAgICAgICAgc2VsZi5yaWdodEFycm93LnNob3coKVxyXG4gICAgfWVsc2Uge1xyXG4gICAgICAgIHNlbGYubGVmdEFycm93LmhpZGUoKVxyXG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5oaWRlKClcclxuICAgIH1cclxufVxyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5CYW5uZXJIb3ZlciA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLmJhbm5lckdyb3VwLmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjbGVhckludGVydmFsKHNlbGYudGltZXIpXHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyh0cnVlKVxyXG4gICAgfSxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5sb29wKClcclxuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KGZhbHNlKVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbkJhbm5lci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXNcclxuICAgIHNlbGYuYmFubmVyVWwuc3RvcCgpLmFuaW1hdGUoeydsZWZ0JzotNzk4KnNlbGYuaW5kZXh9LDUwMClcclxuICAgIHZhciBpbmRleCA9IHNlbGYuaW5kZXg7XHJcbiAgICBpZiAoaW5kZXg9PT0wKXtcclxuICAgICAgICBpbmRleCA9IHNlbGYuYmFubmVyQ291bnQtMTtcclxuICAgIH0gZWxzZSBpZihpbmRleCA9PT1zZWxmLmJhbm5lckNvdW50KzEpe1xyXG4gICAgICAgIGluZGV4ID0gMDtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIGluZGV4ID0gc2VsZi5pbmRleCAtIDE7XHJcbiAgICB9XHJcbiAgICBzZWxmLnBhZ2Vjb250cm9sLmNoaWxkcmVuKFwibGlcIikuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHJcbn1cclxuXHJcbkJhbm5lci5wcm90b3R5cGUubG9vcCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHNlbGYuaW5kZXg+PXNlbGYuYmFubmVyQ291bnQrMSl7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHsnbGVmdCc6LXNlbGYuYmFubmVyV2lkdGh9KVxyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCArPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0sMjAwMCk7XHJcbn1cclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQXJyb3dDbGljayA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxlZnRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IDApe1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7J2xlZnQnOi1zZWxmLmJhbm5lcldpZHRoKnNlbGYuYmFubmVyQ291bnR9KVxyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgtLTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICBzZWxmLnJpZ2h0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChzZWxmLmluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50ICsgMSl7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHsnbGVmdCc6LXNlbGYuYmFubmVyV2lkdGh9KVxyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pXHJcbn1cclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuUGFnZUNvbnRyb2wgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5wYWdlY29udHJvbC5jaGlsZHJlbihcImxpXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LG9iaikge1xyXG4gICAgICAgICQob2JqKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxuXHJcbn1cclxuXHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuaW5pdEJhbm5lcigpXHJcbiAgICB0aGlzLmxvb3AoKVxyXG4gICAgdGhpcy5saXN0ZW5BcnJvd0NsaWNrKClcclxuICAgIHRoaXMuaW5pdFBhZ2VDb250cm9sKClcclxuICAgIHRoaXMubGlzdGVuUGFnZUNvbnRyb2woKVxyXG59XHJcblxyXG5mdW5jdGlvbiBJbmRleCgpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzXHJcbiAgICBzZWxmLnBhZ2UgPSAyO1xyXG4gICAgc2VsZi5jYXRlZ29yeV9pZCA9IDA7XHJcbiAgICBzZWxmLmxvYWRCdG4gPSAkKCcjbG9hZC1tb3JlLWJ0bicpO1xyXG5cclxufTtcclxuXHJcbkluZGV4LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5Mb2FkTW9yZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlbkNhdGVnb3J5RXZlbnQoKTtcclxufVxyXG5cclxuLy/nm5HlkKzliqDovb3mm7TlpJrmjInpkq5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkxvYWRNb3JlRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5sb2FkQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOicvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAncCc6c2VsZi5wYWdlLFxyXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzpzZWxmLmNhdGVnb3J5X2lkXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c2VzID0gcmVzdWx0WydkYXRhJ107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYobmV3c2VzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLHtcIm5ld3Nlc1wiOm5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1bCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB1bC5hcHBlbmQodHBsKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEJ0bi5oaWRlKClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuLy/nm5HlkKzliIbnsbvmjInpkq5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkNhdGVnb3J5RXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHRhYkdyb3VwID0gJCgnLmxpc3QtdGFiJyk7XHJcbiAgICB0YWJHcm91cC5jaGlsZHJlbigpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL3RoaXPku6PooajlvZPliY3pgInkuK1saeagh+etvlxyXG4gICAgICAgIHZhciBsaSA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5X2lkID0gbGkuYXR0cignZGF0YS1jYXRlZ29yeScpO1xyXG4gICAgICAgIHZhciBwYWdlID0gMTtcclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOicvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOmNhdGVnb3J5X2lkLFxyXG4gICAgICAgICAgICAgICAgJ3AnOnBhZ2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbJ2RhdGEnXVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLHtcIm5ld3Nlc1wiOm5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5bCG5b2T5YmN5qCH562+5LiL55qE5omA5pyJ5a2Q5YWD57Sg5Yig5o6JXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NMaXN0R3JvdXAgPSAkKCcubGlzdC1pbm5lci1ncm91cCcpXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3c0xpc3RHcm91cC5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld3NMaXN0R3JvdXAuYXBwZW5kKHRwbClcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSBjYXRlZ29yeV9pZDtcclxuICAgICAgICAgICAgICAgICAgICBsaS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRCdG4uc2hvdygpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgIH0pXHJcbn1cclxuXHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XHJcbiAgICBiYW5uZXIucnVuKCk7XHJcbiAgICB2YXIgaW5kZXg9IG5ldyBJbmRleCgpO1xyXG4gICAgaW5kZXgucnVuKCk7XHJcblxyXG59KSJdfQ==
